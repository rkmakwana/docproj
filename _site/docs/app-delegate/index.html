<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/goodtime/assets/css/main.css">
    <link rel="stylesheet" href="/goodtime/assets/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/goodtime/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>AppDelegate | Jekyll Doc Theme</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="AppDelegate" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="On app startup, following logic and services are executed" />
<meta property="og:description" content="On app startup, following logic and services are executed" />
<link rel="canonical" href="http://gitlab.vertexplus.inet/gitlab/goodtime/goodtime/docs/app-delegate/" />
<meta property="og:url" content="http://gitlab.vertexplus.inet/gitlab/goodtime/goodtime/docs/app-delegate/" />
<meta property="og:site_name" content="Jekyll Doc Theme" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-04T12:00:10+01:00" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://gitlab.vertexplus.inet/gitlab/goodtime/goodtime/docs/app-delegate/","headline":"AppDelegate","dateModified":"2020-02-04T12:00:10+01:00","datePublished":"2020-02-04T12:00:10+01:00","description":"On app startup, following logic and services are executed","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="alternate" type="application/rss+xml" title="Jekyll Doc Theme" href="http://gitlab.vertexplus.inet/gitlab/goodtime/goodtime/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/goodtime/">
                <span><img src="/goodtime/assets/img/logonav.png" alt="Logo"></span> Jekyll Doc Theme
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/goodtime/docs/home/">Docs</a></li>
                <li ><a href="/goodtime/blog/2017/05/03/jekyll-doc-theme/">Blog</a></li>
            </ul>
            <div class="navbar-right">
                <form class="navbar-form navbar-left">
                    <div class="form-group has-feedback">
                        <input id="search-box" type="search" class="form-control" placeholder="Search...">
                        <i class="fa fa-search form-control-feedback"></i>
                    </div>
                </form>
                <ul class="nav navbar-nav">
                    <li><a href="http://gitlab.vertexplus.inet/gitlab/goodtime"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container">
    <div class="row">
        <div class="col-md-4">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
            Getting Started
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-1" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href="/goodtime/docs/home/">Welcome</a>
          
            
            
            <a class="list-group-item " href="/goodtime/docs/themes/">Themes</a>
          
            
            
            <a class="list-group-item " href="/goodtime/docs/customization/">Customization</a>
          
            
            
            <a class="list-group-item " href=""></a>
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
            Examples
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-2" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href="/goodtime/docs/cheatsheet/">Markdown Cheatsheet</a>
          
            
            
            <a class="list-group-item " href="/goodtime/docs/font-awesome/">Font Awesome Icon List</a>
          
            
            
            <a class="list-group-item " href="/goodtime/docs/bootstrap/">Bootstrap Features</a>
          
        </div>
      </div>
    </div>
  
</div>

        </div>

        <div class="col-md-8">
            <h1>AppDelegate</h1>
            <div id="markdown-content-container"><h4 id="on-app-startup-following-logic-and-services-are-executed">On app startup, following logic and services are executed</h4>

<h3 id="1-realm-migration">1. Realm Migration</h3>
<p>The app checks for the <code class="language-plaintext highlighter-rouge">Realm</code> database version, and if the current installed version is less than that of current build, it is migrated to the latest version.</p>

<p>This part is important whenever any changes are made in the Realm models in the app. The <code class="language-plaintext highlighter-rouge">Realm</code> version should be increased every time any changes are made in <code class="language-plaintext highlighter-rouge">Realm</code> models. Failing to do this, the app will face crashes on client devices.</p>

<h3 id="2-iqkeyboardmanager">2. IQKeyboardManager</h3>
<p><code class="language-plaintext highlighter-rouge">IQKeyboardManager</code> is used for handling keyboard related animations and utilities. It is enabled at the launch of the app.</p>

<h3 id="3-social-media-integration">3. Social Media Integration</h3>
<p>Facebook, Twitter and Google Maps/Places libraries are invoked at this stage with their respective app keys. The callback URL’s are also configured in this file.</p>

<h3 id="4-enable-push-notifications">4. Enable Push Notifications</h3>
<p>Prompt user for providing permission to receive and show push notifications. When the device token is received, it is saved to UserDefaults with the key <code class="language-plaintext highlighter-rouge">DEVICE_TOKEN</code>.</p>

<h3 id="5-sdwebimage">5. SDWebImage</h3>
<p>For handling image downloads from url’s and caching them in memory, a third party library - <code class="language-plaintext highlighter-rouge">SDWebImage</code> is used. We faced an issue where the imageViews didn’t refresh the images every time. To overcome this issue, we clear the image cache on the app launch.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SDImageCache.shared().clearMemory()
SDImageCache.shared().clearDisk(onCompletion: nil)
</code></pre></div></div>

<h3 id="6-check-logged-in-user">6. Check logged in user</h3>
<p>Check if the user is logged in the app.</p>

<p>If logged in:</p>
<ul>
  <li>Set landing TabBar screen as rootViewController by passing window instance to <code class="language-plaintext highlighter-rouge">SideDrawerController</code>.</li>
  <li>Set the user data from UserDefaults into the <code class="language-plaintext highlighter-rouge">UserProfile</code> shared object.</li>
  <li>Start the logging mechanism, using <code class="language-plaintext highlighter-rouge">GTLumberJack</code>.</li>
</ul>

<p>If not logged in:</p>
<ul>
  <li>Set Login screen as rootViewController.</li>
</ul>

<h3 id="7-app-wide-services">7. App wide services</h3>
<p>Following services are launched with the app:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">LocationEngine</code>: A separate file is created as an extension for AppDelegate, for managing the location updates in the app.</li>
  <li><code class="language-plaintext highlighter-rouge">ContactsEngine</code>: Fetching contacts from device, filtering and storing in app db, sending it to server.</li>
  <li><code class="language-plaintext highlighter-rouge">ChatEngine</code>: For managing XMPP based one-one and group chat.</li>
</ul>

<h3 id="8-app-launched-using-push-notification">8. App launched using Push Notification</h3>
<p>Check for <code class="language-plaintext highlighter-rouge">aps</code> key in launch options. If present, that means the app is launched using notification. Parse the content, and the xml from the content to find the relevant module, and set the current screen accordingly.</p>

<h3 id="9-check-app-version">9. Check app version</h3>
<p>For notifying and forcing the user to update the app in case of available update on AppStore, we use this feature.</p>
<ul>
  <li>An api call is made to the server to fetch the latest app store app build number.</li>
  <li>This build number is then compared with the app’s build number.</li>
  <li>If the app’s version is lower than that of the version available on App Store, the screen <code class="language-plaintext highlighter-rouge">UpdateAppViewController</code> is set as root, such that the user cannot perform any other action other than updating it to the latest version.</li>
</ul>
</div>
            <div style="clear:both;">
              <p class="text-center">
                <br />
                <a target="_blank" href="https://github.com/aksakalli/jekyll-doc-theme/blob/gh-pages/_docs/app-delegate.md" class="btn btn-default" role="button">
                  <i class="fa fa-pencil fa-lg"></i> Improve this page
                </a>
              </p>
            </div>
            <hr>
            





  
  

  
  

  
  

  
  

  
  

  
  

  
  


        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            Jekyll Doc Theme 2020 |
            Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = '/goodtime'
</script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="/goodtime/assets/js/bootstrap.min.js "></script>
<script src="/goodtime/assets/js/typeahead.bundle.min.js "></script>

<script src="/goodtime/assets/js/main.js "></script>

</body>

</html>
